---
title: "Ethnic Power Relations (EPR)"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

*Last compiled on: `r Sys.Date()`*

Source: https://icr.ethz.ch/data/epr/core/

License: not clear

Citation: Vogt, Manuel, Nils-Christian Bormann, Seraina Rüegger, Lars-Erik Cederman, Philipp Hunziker, and Luc Girardin. 2015. "Integrating Data on Ethnicity, Geography, and Conflict: The Ethnic Power Relations Data Set Family." Journal of Conflict Resolution 59(7): 1327–42.

Coverage: Yearly resolution. Covers all major G&W countries. 

Lagged: no

***********

To update:

1. Download and get EPR data from the URL above. 

2. Run the `clean-data.Rmd` script (interactively!) and adjust as needed base on new facts on the ground. 

3. The main output is "output/epr.csv".

## Usage

```{r, message=FALSE}
library(readr)
library(dplyr)
library(states)
library(yaml)

data(gwstates)

epr <- read_csv("output/epr.csv")

glimpse(epr)


stats <- read_yaml("output/stats-epr.yml")
stats
```

### Missing cases

```{r}
# Missing values
incomplete <- epr %>% 
  filter(!complete.cases(.)) %>%
  group_by(gwcode) %>%
  summarize(n = n(), years = paste0(min(year), "-", max(year))) %>%
  left_join(gwstates[, c("gwcode", "country_name", "microstate")]) %>%
  mutate(microstate = as.integer(microstate)) %>%
  select(country_name, everything()) 

# Total number of incomplete rows
sum(incomplete$n)

incomplete %>%
  knitr::kable()
```


